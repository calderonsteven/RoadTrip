<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Road Trip</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Steven Calderon">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
    #mapContainer{
		height: 400px;
		background-color: #f5f5f5;
		width: 100%;
	  }
    </style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="assets/ico/favicon.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Road Trip</a>
          <div class="nav-collapse collapse">
            <!--<p class="navbar-text pull-right">
              Logged in as <a href="#" class="navbar-link">Username</a>
            </p> -->
            <ul class="nav">
              <li class="active"><a href="#">Inicio</a></li>
              <li><a href="#about">El Viaje</a></li>
              <li><a href="#contact">El flickr</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list" id="images" >
              <li class="nav-header">Fotos Recorrido</li>              
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <div class="span9">
          <div id="mapContainer" class="container">
			<div id="map" style="width: 100%; height: 100%;float:left;"></div>	
          </div>         
        </div><!--/span-->
      </div><!--/row-->

      <hr>
      <footer>
        <p>&copy; The Cookies Corporation 2013</p>
      </footer>
    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--<script src="assets/js/jquery.js"></script>-->
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	
	<!--
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>-->

	<!-- custom scripts
    ================================================== -->
    <!-- aqui van los scripts de la logica de la pagina -->
	<script src="http://maps.google.com/maps?file=api&amp;key=AIzaSyCcCKiU3CdLVwprqErPNyQAj56jvxE_lp0"></script>
	
	<script>
		var oMap = new GMap2(document.getElementById("map"));	
		
		//variables and options for flickr API
		var photoset_id = "72157633000512213";
		var api_key = "9df39472f3cb9f0afbf4a06ac5684a8b";
		var extras = "date_upload%2C+date_taken%2C+owner_name%2C+icon_server%2C+original_format%2C+last_update%2C+geo%2C+tags%2C+machine_tags%2C+o_dims%2C+views%2C+media%2C+path_alias%2C+url_sq%2C+url_t%2C+url_s%2C+url_q%2C+url_m%2C+url_n%2C+url_z%2C+url_c%2C+url_l%2C+url_o";
		var urlPhotoset = "http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key="+api_key+"&photoset_id="+photoset_id+"&extras="+extras+"&format=json&callback=?";

		console.log(urlPhotoset);
		
		//Call the flickr.photosets.getPhotos via ajax
		$.getJSON(urlPhotoset);

		//callback function for $.getJSON(urlPhotoset);
		function jsonFlickrApi(rsp){
			if(!rsp.photoset){ return; }
			
			//add each image in map and add in the photo lists
			$.each(rsp.photoset.photo, function(i,item){
				//console.log(item);
				
				//put in map
				putInMap(item);
				
				//append the new image
				$("#images").append('<li><img class="img-rounded" src="'+item.url_m+'" data-lat="'+item.latitude+'" data-lon="'+item.longitude+'" /></li>');				
			});
			
			//add event for center map
			$("#images img").click(function(){				
				//re center on click image
				var lat = $(this).data("lat");
				var lon = $(this).data("lon");
				oMap.setCenter(new GLatLng(lat, lon), 13);
			});
		}	

		//add photo to map
		function putInMap(photo){
			//console.log(photo.latitude, photo.longitude);  
			
			// center the google map and add a marker
			oMap.setCenter(new GLatLng(photo.latitude, photo.longitude), 13);  
			var oMarker = new GMarker(new GLatLng(photo.latitude, photo.longitude));  
			oMap.addOverlay(oMarker);
		}
	</script>
  </body>
</html>
